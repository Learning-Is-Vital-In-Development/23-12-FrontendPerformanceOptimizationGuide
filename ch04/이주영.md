# 3-2 및 4장 정리 (캐시, 이미지 갤러리)

## 캐시란

빈도수가 높은 데이터를 임시 저장 공간에 복사하여 저장하는 것을 말한다.

> 브라우저에서 캐시는 어떻게 조절하지?

```
//response Header
Cache-Control: max-age=604800


```

1. 종류
   - 메모리 캐시 : 말 그대로 메모리에 저장
   - 디스크 캐시 : 파일 형태로 디스크에 저장하는 방식

> 브라우저가 사용 빈도나 파일 크기에 따라 특정 알고리즘을 사용하여 처리함

2. 특징

   - 캐시는 직접 제어 불가능
   - 캐시가 적용된 리소스의 응답 헤더를 보면 Cache-Control 헤더를 확인할 수 있음
   - 이를 통해 브라우저는 해당 리소스를 얼마나 캐시할 지 판단함

3. Cache-Control

   - no-cache
     - 캐시 사용 전에 서버 검사, 캐시를 사용하지 않는게 아님
     - 캐시 사용 전에 서버에서 캐시된 리소스를 사용해도 되는지 검사함
   - no-store
     - 캐시 사용 안함
   - public
     - 모든 환경에서 캐시 사용 가능
   - private
     - 브라우저 환경에서만 캐시 사용, 외부 캐시 서버에서는 사용 불가
     - 중간 서버에서도 캐시할려고 할 때 사용
   - max-age
     - 캐시의 유효 시간
     - 초 단위로 얼마나 오래 캐시를 사용할 지 설정

## 레이아웃 이동 피하기

- 레이아웃 이동의 원인
  - 사이즈가 미리 정의되지 않은 이미지, 광고 요소
  - 동적으로 삽입된 컨텐츠
  - 웹 폰트
- 레이아웃 이동 해결
  - 미리 공간 확보
    - absolute + padding
    - aspect-ratio

## 메모리제이션

- 한 번 실행된 함수에 대해 해당 반환값을 기억해두고 있다가 똑같은 조건으로 실행되었을 때 함수의 코드를 모두 실행하지 않고 바로 전에 기억해 둔 값을 반환

예를 보면

```jsx
const cache = {};

function square(n) {
	if (cache[n]) {
		// 이미 저장된 값이라면 기존 값을 그대로 반환
		return cache[n];
	}
	const result = n * n;

	cache[n] = result; //  다음에 저장된 값을 사용할 수 있도록 저장

	return result;
}
```
